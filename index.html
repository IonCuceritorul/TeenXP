<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagina Principală</title>
    <style>
        body {
            font-family: Arial;
            margin: 0;
            padding: 0;
            background: #f7f7f7;
        }

        header {
            background: #4CAF50;
            color: white;
            padding: 15px;
            text-align: center;
        }

        main {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 10px;
        }

        button {
            padding: 10px 15px;
            background: white;
            border: 1px solid #4CAF50;
            border-radius: 5px;
            cursor: pointer;
        }

            button:hover {
                background: #e6ffe6;
            }
    </style>
</head>
<body>

    <header>
        <h1>Pagina Principală</h1>
        <p id="welcomeMsg"></p>
        <button id="logoutBtn">Logout</button>
    </header>

    <main>
    <h2>Postează un job</h2>
    <input type="text" id="jobTitle" placeholder="Titlu job">
    <input type="text" id="jobDesc" placeholder="Descriere job">
    <input type="text" id="jobReward" placeholder="Recompensă (ex: 50 RON)">
    <button id="postJobBtn">Postează Job</button>

    <h2>Joburi disponibile</h2>
    <ul id="jobList"></ul>
</main>


    <script>
    const welcomeMsg = document.getElementById('welcomeMsg');
    const logoutBtn = document.getElementById('logoutBtn');

    const currentUser = localStorage.getItem('currentUser');

    // Verificăm dacă utilizatorul e logat
    if(!currentUser){
        window.location.href = "login.html"; // dacă nu, redirecționăm
    } else {
        welcomeMsg.innerText = `Salut, ${currentUser}!`;
    }

    // Logout
    logoutBtn.addEventListener('click', () => {
        localStorage.removeItem('currentUser');
        window.location.href = "login.html";
    });

    // Preluăm elementele
const jobTitleInput = document.getElementById('jobTitle');
const jobDescInput = document.getElementById('jobDesc');
const jobRewardInput = document.getElementById('jobReward');
const postJobBtn = document.getElementById('postJobBtn');
const jobList = document.getElementById('jobList');

// Obținem joburile din localStorage sau inițializăm array gol
let jobs = JSON.parse(localStorage.getItem('jobs')) || [];

// Funcție să afișăm joburile
function displayJobs() {
    jobList.innerHTML = '';
    jobs.forEach((job, index) => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${job.title}</strong> - ${job.desc} - ${job.reward} 
                        <br>Postat de: ${job.postedBy} 
                        <button ${job.takenBy ? "disabled" : ""} onclick="acceptJob(${index})">
                            ${job.takenBy ? `Acceptat de ${job.takenBy}` : 'Acceptă Job'}
                        </button>`;
        jobList.appendChild(li);
    });
}

// Funcție pentru a posta job
postJobBtn.addEventListener('click', () => {
    const title = jobTitleInput.value.trim();
    const desc = jobDescInput.value.trim();
    const reward = jobRewardInput.value.trim();

    if(!title || !desc || !reward){
        alert("Completează toate câmpurile!");
        return;
    }

    jobs.push({
        title,
        desc,
        reward,
        postedBy: currentUser,
        takenBy: null
    });

    localStorage.setItem('jobs', JSON.stringify(jobs));
    jobTitleInput.value = '';
    jobDescInput.value = '';
    jobRewardInput.value = '';
    displayJobs();
});

// Funcție pentru a accepta job
function acceptJob(index) {
    if(jobs[index].takenBy){
        alert("Jobul a fost deja acceptat!");
        return;
    }
    jobs[index].takenBy = currentUser;
    localStorage.setItem('jobs', JSON.stringify(jobs));
    displayJobs();
}

// Afișăm joburile la încărcare
displayJobs();


    </script>

    

</body>
</html>
